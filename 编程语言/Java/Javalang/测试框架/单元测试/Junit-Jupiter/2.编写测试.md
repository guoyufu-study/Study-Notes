## 2. ç¼–å†™æµ‹è¯•

ä¸‹é¢çš„ç¤ºä¾‹ç®€è¦ä»‹ç»äº†**åœ¨JUnit Jupiterä¸­ç¼–å†™æµ‹è¯•çš„æœ€ä½è¦æ±‚**ã€‚æœ¬ç« çš„åç»­ç« èŠ‚å°†æä¾›æ‰€æœ‰å¯ç”¨ç‰¹æ€§çš„è¯¦ç»†ç»†èŠ‚ã€‚

*ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹*

``` java
import static org.junit.jupiter.api.Assertions.assertEquals;
import example.util.Calculator;
import org.junit.jupiter.api.Test;

class MyFirstJUnitJupiterTests {
    private final Calculator calculator = new Calculator();
    @Test
    void addition() {
        assertEquals(2, calculator.add(1, 1));
    }
}
```

### 2.1. æ³¨è§£

JUnit Jupiteæ”¯æŒä»¥ä¸‹æ³¨è§£ï¼Œç”¨äºé…ç½®æµ‹è¯•å’Œæ‰©å±•æ¡†æ¶ã€‚

é™¤éå¦æœ‰è¯´æ˜ï¼Œæ‰€æœ‰æ ¸å¿ƒæ³¨è§£éƒ½ä½äº `junit-jupiter-api` æ¨¡å—çš„[`org.junit.jupiter.api`](https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/package-summary.html)åŒ…ã€‚

| æ³¨è§£                     | æè¿°                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `@Test`                  | è¡¨ç¤ºæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ã€‚<br/>ä¸JUnit 4çš„`@Test`æ³¨è§£ä¸åŒï¼Œè¯¥æ³¨è§£ä¸å£°æ˜ä»»ä½•å±æ€§ï¼Œå› ä¸ºJUnit Jupiterä¸­çš„æµ‹è¯•æ‰©å±•åŸºäºå®ƒä»¬è‡ªå·±çš„ä¸“ç”¨æ³¨è§£è¿›è¡Œæ“ä½œã€‚ |
| `@ParameterizedTest`     | è¡¨ç¤ºæ–¹æ³•æ˜¯[å‚æ•°åŒ–æµ‹è¯•](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests)ã€‚ |
| `@RepeatedTest`          | è¡¨ç¤ºæ–¹æ³•æ˜¯[é‡å¤æµ‹è¯•](https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests)çš„æµ‹è¯•æ¨¡æ¿ã€‚ |
| `@TestFactory`           | è¡¨ç¤ºæ–¹æ³•æ˜¯ç”¨äº[åŠ¨æ€æµ‹è¯•](https://junit.org/junit5/docs/current/user-guide/#writing-tests-dynamic-tests)çš„æµ‹è¯•å·¥å‚ã€‚ |
| `@TestTemplate`          | è¡¨ç¤ºæ–¹æ³•æ˜¯[æµ‹è¯•ç”¨ä¾‹çš„æ¨¡æ¿](https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-templates)ï¼Œæµ‹è¯•ç”¨ä¾‹è®¾è®¡ä¸ºæ ¹æ®å·²æ³¨å†Œ[æä¾›ç¨‹åº](https://junit.org/junit5/docs/current/user-guide/#extensions-test-templates)è¿”å›çš„è°ƒç”¨ä¸Šä¸‹æ–‡çš„æ•°é‡è¢«å¤šæ¬¡è°ƒç”¨ã€‚ |
| `@TestMethodOrder`       | ç”¨äºä¸ºå¸¦æ³¨è§£çš„æµ‹è¯•ç±»é…ç½®[æµ‹è¯•æ–¹æ³•çš„æ‰§è¡Œé¡ºåº](https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order)ï¼› ç±»ä¼¼äºJUnit 4çš„`@FixMethodOrder`ã€‚ |
| `@TestInstance`          | ç”¨äºä¸ºå¸¦æ³¨è§£çš„æµ‹è¯•ç±»é…ç½®[æµ‹è¯•å®ä¾‹ç”Ÿå‘½å‘¨æœŸ](https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle)ã€‚ |
| `@DisplayName`           | å£°æ˜æµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•çš„è‡ªå®šä¹‰[æ˜¾ç¤ºåç§°](https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-names)ã€‚ |
| `@DisplayNameGeneration` | å£°æ˜æµ‹è¯•ç±»çš„è‡ªå®šä¹‰[æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨](https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator)ã€‚ |
| `@BeforeEach`            | è¡¨ç¤ºå¸¦æ³¨è§£çš„æ–¹æ³•åº”åœ¨å½“å‰ç±»ä¸­çš„**æ¯ä¸ª**`@Test`, `@RepeatedTest`, `@ParameterizedTest`, æˆ–`@TestFactory`æ–¹æ³•**ä¹‹å‰**æ‰§è¡Œï¼› ç±»ä¼¼äºJUnit 4çš„`@Before`ã€‚ |
| `@AfterEach`             | è¡¨ç¤ºå¸¦æ³¨è§£çš„æ–¹æ³•åº”åœ¨å½“å‰ç±»ä¸­çš„**æ¯ä¸ª**`@Test`, `@RepeatedTest`, `@ParameterizedTest`, æˆ–`@TestFactory`æ–¹æ³•**ä¹‹å**æ‰§è¡Œï¼› ç±»ä¼¼äºJUnit 4çš„`@After`ã€‚ |
| `@BeforeAll`             | è¡¨ç¤ºå¸¦æ³¨è§£çš„æ–¹æ³•åº”åœ¨å½“å‰ç±»ä¸­çš„**æ‰€æœ‰**`@Test`, `@RepeatedTest`, `@ParameterizedTest`, æˆ–`@TestFactory`æ–¹æ³•**ä¹‹å**æ‰§è¡Œï¼› ç±»ä¼¼äºJUnit 4çš„`@BeforeAll`ã€‚è¯¥æ–¹æ³•å¿…é¡»æ˜¯`static`çš„ã€‚ |
| `@AfterAll`              | è¡¨ç¤ºå¸¦æ³¨è§£çš„æ–¹æ³•åº”åœ¨å½“å‰ç±»ä¸­çš„**æ‰€æœ‰**`@Test`, `@RepeatedTest`, `@ParameterizedTest`, æˆ–`@TestFactory`æ–¹æ³•**ä¹‹å**æ‰§è¡Œï¼› ç±»ä¼¼äºJUnit 4çš„`@AfterClass`ã€‚è¯¥æ–¹æ³•å¿…é¡»æ˜¯`static`çš„ã€‚ |
| `@Nested`                | è¡¨ç¤ºå¸¦æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªéé™æ€çš„[åµŒå¥—æµ‹è¯•ç±»](https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested)ã€‚ é™¤éä½¿ç”¨"per-class"æµ‹è¯•å®ä¾‹ç”Ÿå‘½å‘¨æœŸï¼Œå¦åˆ™`@BeforeAll`å’Œ`@AfterAll`æ–¹æ³•ä¸èƒ½ç›´æ¥åœ¨`@Nested`æµ‹è¯•ç±»ä¸­ä½¿ç”¨ã€‚ |
| `@Tag`                   | ç”¨äºåœ¨ç±»æˆ–æ–¹æ³•çº§åˆ«ä¸Šå£°æ˜[ç”¨äºè¿‡æ»¤æµ‹è¯•çš„æ ‡ç­¾](https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering)ï¼› ç±»ä¼¼äºTestNGä¸­çš„æµ‹è¯•ç»„æˆ–JUnit 4ä¸­çš„ç±»åˆ«ã€‚ |
| `@Disabled`              | ç”¨äºç¦ç”¨æµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ï¼› ç±»ä¼¼äºJUnit 4çš„`@Ignore`ã€‚        |
| `@Timeout`               | å¦‚æœæ‰§è¡Œè¶…è¿‡ç»™å®šçš„æŒç»­æ—¶é—´ï¼Œåˆ™ä½¿æµ‹è¯•ï¼Œæµ‹è¯•å·¥å‚ï¼Œæµ‹è¯•æ¨¡æ¿æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¤±è´¥ã€‚ |
| `@ExtendWith`            | ç”¨äº[ä»¥å£°æ˜æ–¹å¼æ³¨å†Œæ‰©å±•](https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative)ã€‚ |
| `@RegisterExtension`     | ç”¨äºé€šè¿‡å­—æ®µ[ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œæ‰©å±•](https://junit.org/junit5/docs/current/user-guide/#extensions-registration-programmatic)ã€‚ |
| `@TempDir`               | ç”¨äºé€šè¿‡ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æˆ–æµ‹è¯•æ–¹æ³•ä¸­çš„å­—æ®µæ³¨å…¥æˆ–å‚æ•°æ³¨å…¥æ¥æä¾›[ä¸´æ—¶ç›®å½•](https://junit.org/junit5/docs/current/user-guide/#writing-tests-built-in-extensions-TempDirectory)ï¼› ä½äº`org.junit.jupiter.api.io`åŒ…ä¸­ã€‚ |

> ä¸€äº›æ³¨è§£ç›®å‰å¯èƒ½æ˜¯å®éªŒæ€§çš„ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ[å®éªŒAPIs](https://junit.org/junit5/docs/current/user-guide/#api-evolution-experimental-apis)ä¸­çš„è¡¨æ ¼ã€‚

#### 2.1.1. å…ƒæ³¨è§£å’Œç»„åˆæ³¨è§£

JUnit Jupiteræ³¨è§£å¯ä»¥ç”¨ä½œå…ƒæ³¨è§£ã€‚è¿™æ„å‘³ç€ä½ **å¯ä»¥å®šä¹‰è‡ªå·±çš„ç»„åˆæ³¨è§£**ï¼Œå®ƒå°†è‡ªåŠ¨ç»§æ‰¿å…ƒæ³¨è§£çš„è¯­ä¹‰ã€‚

æ¯”å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º`@Fast`çš„è‡ªå®šä¹‰ç»„åˆæ³¨è§£ï¼Œè€Œä¸æ˜¯åœ¨æ•´ä¸ªä»£ç åº“ä¸­å¤åˆ¶å’Œç²˜è´´ `@Tag("fast")` ï¼ˆå‚è§[æ ‡è®°å’Œè¿‡æ»¤](https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering))ã€‚ç„¶åå¯ä»¥ä½¿ç”¨`@Fast`ä½œä¸º `@Tag("fast")` çš„æ›¿ä»£ã€‚

``` java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import org.junit.jupiter.api.Tag;

@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
@Tag("fast")
public @interface Fast {
}
```

 ä¸‹é¢çš„`@Test`æ–¹æ³•æ¼”ç¤ºäº†`@Fast`æ³¨è§£çš„ç”¨æ³•ã€‚ 

``` java
@Fast
@Test
void myFastTest() {
    // ...
}
```

ä½ ç”šè‡³å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œå¼•å…¥ä¸€ä¸ªå®šåˆ¶çš„`@FastTest`æ³¨è§£ï¼Œå®ƒå¯ä»¥ä½œä¸º `@Tag("fast")` å’Œ `@Test` çš„æ›¿ä»£ã€‚

``` java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import org.junit.jupiter.api.Tag;
import org.junit.jupiter.api.Test;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Tag("fast")
@Test
public @interface FastTest {
}
```

JUnitè‡ªåŠ¨å°†ä»¥ä¸‹å†…å®¹è¯†åˆ«ä¸ºå¸¦æœ‰â€œfastâ€æ ‡è®°çš„ `@Test` æ–¹æ³•ã€‚

``` java
@FastTest
void myFastTest() {
    // ...
}
```

### 2.2. æµ‹è¯•ç±»å’Œæ–¹æ³•

 **Test Class**: åŒ…å«è‡³å°‘ä¸€ä¸ªæµ‹è¯•æ–¹æ³•çš„ä»»ä½•é¡¶çº§ç±»ã€`static`æˆå‘˜ç±»ï¼Œæˆ–è€…[`@Nested` ç±»](https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested)ã€‚

æµ‹è¯•ç±»å¿…é¡»ä¸æ˜¯`abstract`ï¼Œå¹¶ä¸”**å¿…é¡»æœ‰åªä¸€ä¸ªæ„é€ **ã€‚

 **Test Method**: ä½¿ç”¨`@Test`, `@RepeatedTest`, `@ParameterizedTest`, `@TestFactory`, æˆ–`@TestTemplate`ç›´æ¥æ³¨è§£ï¼Œæˆ–è€…ä»¥å®ƒä»¬ä½œä¸ºå…ƒæ³¨è§£çš„æ³¨è§£ï¼Œè¿›è¡Œæ³¨è§£çš„ä»»ä½•å®ä¾‹æ–¹æ³•ã€‚

 **Lifecycle Method**: ä½¿ç”¨`@BeforeAll`, `@AfterAll`, `@BeforeEach`, æˆ– `@AfterEach`ç›´æ¥æ³¨è§£ï¼Œæˆ–è€…ä»¥å®ƒä»¬ä½œä¸ºå…ƒæ³¨è§£çš„æ³¨è§£ï¼Œè¿›è¡Œæ³¨è§£çš„ä»»ä½•æ–¹æ³•ã€‚

æµ‹è¯•æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯ä»¥**åœ¨å½“å‰æµ‹è¯•ç±»ä¸­æœ¬åœ°å£°æ˜**ï¼Œ**ä»è¶…ç±»ç»§æ‰¿**æˆ–**ä»æ¥å£ç»§æ‰¿**ï¼ˆè¯·å‚é˜…[æµ‹è¯•æ¥å£å’Œé»˜è®¤æ–¹æ³•](https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-interfaces-and-default-methods)ï¼‰ã€‚ å¦å¤–ï¼Œæµ‹è¯•æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ä¸èƒ½æŠ½è±¡**ï¼Œä¹Ÿ**ä¸èƒ½è¿”å›å€¼**ã€‚ 

>  æµ‹è¯•ç±»ï¼Œæµ‹è¯•æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ä¸éœ€è¦ `public`ï¼Œä½†ä¸èƒ½ `private`**ã€‚ 
>
>  é€šå¸¸**å»ºè®®çœç•¥æµ‹è¯•ç±»ã€æµ‹è¯•æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ `public` ä¿®é¥°ç¬¦**ï¼Œé™¤éæœ‰æŠ€æœ¯åŸå› ï¼Œä¾‹å¦‚ï¼Œå½“æµ‹è¯•ç±»è¢«å¦ä¸€ä¸ªåŒ…ä¸­çš„æµ‹è¯•ç±»æ‰©å±•æ—¶ã€‚è®©ç±»å’Œæ–¹æ³• `public` çš„å¦ä¸€ä¸ªæŠ€æœ¯åŸå› æ˜¯åœ¨ä½¿ç”¨ Java æ¨¡å—ç³»ç»Ÿæ—¶ç®€åŒ–å¯¹æ¨¡å—è·¯å¾„çš„æµ‹è¯•ã€‚

ä»¥ä¸‹æµ‹è¯•ç±»æ¼”ç¤º`@Test`æ–¹æ³•å’Œæ‰€æœ‰å—æ”¯æŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç”¨æ³•ã€‚æœ‰å…³è¿è¡Œæ—¶è¯­ä¹‰çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§[æµ‹è¯•æ‰§è¡Œé¡ºåº]()å’Œ[å›è°ƒçš„åŒ…è£…è¡Œä¸º]()ã€‚ 

ä¸€ä¸ªæ ‡å‡†æµ‹è¯•ç±»

``` java
import static org.junit.jupiter.api.Assertions.fail;
import static org.junit.jupiter.api.Assumptions.assumeTrue;

import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

class StandardTests {

    @BeforeAll
    static void initAll() {
    }

    @BeforeEach
    void init() {
    }

    @Test
    void succeedingTest() {
    }

    @Test
    void failingTest() {
        fail("a failing test");
    }

    @Test
    @Disabled("for demonstration purposes")
    void skippedTest() {
        // not executed
    }

    @Test
    void abortedTest() {
        assumeTrue("abc".contains("Z"));
        fail("test should have been aborted");
    }

    @AfterEach
    void tearDown() {
    }

    @AfterAll
    static void tearDownAll() {
    }

}
```

### 2.3. æ˜¾ç¤ºåç§°

 æµ‹è¯•ç±»å’Œæµ‹è¯•æ–¹æ³•å¯ä»¥**é€šè¿‡`@DisplayName`æ¥å£°æ˜è‡ªå®šä¹‰æ˜¾ç¤ºåç§°**ï¼Œå¯ä»¥å¸¦æœ‰ç©ºæ ¼ï¼Œç‰¹æ®Šå­—ç¬¦ï¼Œç”šè‡³æ˜¯ `emoji` è¡¨æƒ…ç¬¦å·ã€‚è¿™äº›åç§°å°†ç”±æµ‹è¯•è¿è¡Œå™¨å’ŒIDEsï¼Œåœ¨æµ‹è¯•æŠ¥å‘Šä¸­æ˜¾ç¤ºã€‚ 

``` java
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

@DisplayName("A special test case")
class DisplayNameDemo {

    @Test
    @DisplayName("Custom test name containing spaces")
    void testWithDisplayNameContainingSpaces() {
    }

    @Test
    @DisplayName("â•¯Â°â–¡Â°ï¼‰â•¯")
    void testWithDisplayNameContainingSpecialCharacters() {
    }

    @Test
    @DisplayName("ğŸ˜±")
    void testWithDisplayNameContainingEmoji() {
    }

}
```

#### 2.3.1. æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨

JUnit Jupiteræ”¯æŒè‡ªå®šä¹‰æ˜¾ç¤ºåç”Ÿæˆå™¨ï¼Œå¯ä»¥é€šè¿‡`@DisplayNameGeneration`æ³¨è§£è¿›è¡Œé…ç½®ã€‚é€šè¿‡`@DisplayName`æ³¨è§£æä¾›çš„å€¼å§‹ç»ˆä¼˜å…ˆäº`DisplayNameGenerator`ç”Ÿæˆçš„æ˜¾ç¤ºåã€‚

ç”Ÿæˆå™¨å¯ä»¥é€šè¿‡å®ç° `DisplayNameGenerator` æ¥åˆ›å»ºã€‚ä»¥ä¸‹æ˜¯ Jupiter ä¸­å¯ç”¨çš„ä¸€äº›é»˜è®¤å€¼ï¼š

| æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨        | è¡Œä¸º                                                      |
| :-------------------- | :-------------------------------------------------------- |
| `Standard`            | åŒ¹é…è‡ª JUnit Jupiter 5.0 å‘å¸ƒä»¥æ¥çš„æ ‡å‡†æ˜¾ç¤ºåç§°ç”Ÿæˆè¡Œä¸ºã€‚ |
| `Simple`              | åˆ é™¤æ²¡æœ‰å‚æ•°çš„æ–¹æ³•çš„å°¾æ‹¬å·ã€‚                              |
| `ReplaceUnderscores`  | ç”¨ç©ºæ ¼æ›¿æ¢ä¸‹åˆ’çº¿ã€‚                                        |
| `IndicativeSentences` | é€šè¿‡è¿æ¥æµ‹è¯•åç§°å’Œå°é—­ç±»æ¥ç”Ÿæˆå®Œæ•´çš„å¥å­ã€‚                |

è¯·æ³¨æ„ï¼Œå¯¹äº `IndicativeSentences`ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `@IndicativeSentencesGeneration` è‡ªå®šä¹‰åˆ†éš”ç¬¦å’Œåº•å±‚ç”Ÿæˆå™¨ã€‚å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š

``` java
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.DisplayNameGeneration;
import org.junit.jupiter.api.DisplayNameGenerator;
import org.junit.jupiter.api.IndicativeSentencesGeneration;
import org.junit.jupiter.api.Nested;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.ValueSource;

class DisplayNameGeneratorDemo {

    @Nested
    @DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
    class A_year_is_not_supported {

        @Test
        void if_it_is_zero() {
        }

        @DisplayName("A negative value for year is not supported by the leap year computation.")
        @ParameterizedTest(name = "For example, year {0} is not supported.")
        @ValueSource(ints = { -1, -4 })
        void if_it_is_negative(int year) {
        }

    }

    @Nested
    @IndicativeSentencesGeneration(separator = " -> ", generator = DisplayNameGenerator.ReplaceUnderscores.class)
    class A_year_is_a_leap_year {

        @Test
        void if_it_is_divisible_by_4_but_not_by_100() {
        }

        @ParameterizedTest(name = "Year {0} is a leap year.")
        @ValueSource(ints = { 2016, 2020, 2048 })
        void if_it_is_one_of_the_following_years(int year) {
        }

    }

}
```

``` 
+-- DisplayNameGeneratorDemo [OK]
  +-- A year is not supported [OK]
  | +-- A negative value for year is not supported by the leap year computation. [OK]
  | | +-- For example, year -1 is not supported. [OK]
  | | '-- For example, year -4 is not supported. [OK]
  | '-- if it is zero() [OK]
  '-- A year is a leap year [OK]
    +-- A year is a leap year -> if it is divisible by 4 but not by 100. [OK]
    '-- A year is a leap year -> if it is one of the following years. [OK]
      +-- Year 2016 is a leap year. [OK]
      +-- Year 2020 is a leap year. [OK]
      '-- Year 2048 is a leap year. [OK]
```



#### 2.3.2. è®¾ç½®é»˜è®¤æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨

å¯ä»¥ä½¿ç”¨[é…ç½®å‚æ•°](https://junit.org/junit5/docs/current/user-guide/#running-tests-config-params) `junit.jupiter.displayname.generator.default` æŒ‡å®šé»˜è®¤æƒ…å†µä¸‹è¦ä½¿ç”¨çš„`DisplayNameGenerator` çš„å®Œå…¨é™å®šçš„ç±»åã€‚ å°±åƒé€šè¿‡`@DisplayNameGeneration`æ³¨è§£é…ç½®çš„æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨ä¸€æ ·ï¼Œæä¾›çš„ç±»å¿…é¡»å®ç°`DisplayNameGenerator`æ¥å£ã€‚é™¤éåœ¨å°é—­çš„æµ‹è¯•ç±»æˆ–æµ‹è¯•æ¥å£ä¸Šå­˜åœ¨`@DisplayNameGeneration`æ³¨è§£ï¼Œå¦åˆ™é»˜è®¤çš„æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨å°†ç”¨äºæ‰€æœ‰æµ‹è¯•ã€‚é€šè¿‡`@DisplayName`æ³¨è§£æä¾›çš„å€¼å§‹ç»ˆä¼˜å…ˆäº`DisplayNameGenerator`ç”Ÿæˆçš„æ˜¾ç¤ºåç§°ã€‚ 

 ä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹è¦ä½¿ç”¨`ReplaceUnderscores`æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨ï¼Œåº”å°†é…ç½®å‚æ•°è®¾ç½®ä¸ºç›¸åº”çš„å®Œå…¨é™å®šçš„ç±»åç§°ã€‚æ¯”å¦‚ï¼Œåœ¨`src/test/resources/junit-platform.properties`ä¸­ï¼š

``` properties
junit.jupiter.displayname.generator.default = \
    org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores
```

åŒæ ·ï¼Œä½ å¯ä»¥æŒ‡å®šå®ç°`DisplayNameGenerator`çš„ä»»ä½•è‡ªå®šä¹‰ç±»çš„å®Œå…¨é™å®šåç§°ã€‚ 

æ€»è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªæµ‹è¯•ç±»æˆ–æ–¹æ³•çš„æ˜¾ç¤ºåç§°æ˜¯æ ¹æ®ä»¥ä¸‹**ä¼˜å…ˆçº§è§„åˆ™**ç¡®å®šçš„ï¼š 

1. `@DisplayName`æ³¨è§£çš„å€¼ï¼Œå¦‚æœå­˜åœ¨ã€‚
2. é€šè¿‡è°ƒç”¨`@DisplayNameGeneration`æ³¨è§£ä¸­æŒ‡å®šçš„`DisplayNameGenerator`ï¼Œå¦‚æœå­˜åœ¨ã€‚
3.  é€šè¿‡è°ƒç”¨ç”±é…ç½®å‚æ•°é…ç½®çš„é»˜è®¤`DisplayNameGenerator`ï¼Œå¦‚æœå­˜åœ¨ã€‚
4. é€šè¿‡è°ƒç”¨`org.junit.jupiter.api.DisplayNameGenerator.Standard`

### 2.4. æ–­è¨€

JUnit Jupiteré™„å¸¦äº†è®¸å¤š**JUnit 4æ‹¥æœ‰çš„æ–­è¨€æ–¹æ³•**ï¼Œå¹¶æ·»åŠ äº†ä¸€äº›éå¸¸**é€‚åˆä¸Java 8 lambdaä¸€èµ·ä½¿ç”¨çš„æ–¹æ³•**ã€‚ æ‰€æœ‰çš„JUnit Jupiteræ–­è¨€éƒ½æ˜¯`org.junit.jupiter.api.Assertions`ç±»ä¸­çš„é™æ€æ–¹æ³•ã€‚

```java
import static java.time.Duration.ofMillis;
import static java.time.Duration.ofMinutes;
import static org.junit.jupiter.api.Assertions.assertAll;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTimeout;
import static org.junit.jupiter.api.Assertions.assertTimeoutPreemptively;
import static org.junit.jupiter.api.Assertions.assertTrue;

import example.domain.Person;
import example.util.Calculator;

import org.junit.jupiter.api.Test;

class AssertionsDemo {

    private final Calculator calculator = new Calculator();

    private final Person person = new Person("Jane", "Doe");

    @Test // æ ‡å‡†æ–­è¨€
    void standardAssertions() {
        assertEquals(2, calculator.add(1, 1));
        assertEquals(4, calculator.multiply(2, 2),
                     "ç°åœ¨ï¼Œå¯é€‰çš„å¤±è´¥æ¶ˆæ¯å˜æˆæœ€åä¸€ä¸ªå‚æ•°");
        assertTrue('a' < 'b', //æ–­è¨€æ¶ˆæ¯å¯ä»¥æ‡’
                   () -> "æ–­è¨€æ¶ˆæ¯å¯ä»¥å»¶è¿Ÿè®¡ç®— -- "
                   + "ä»¥é¿å…ä¸å¿…è¦åœ°æ„é€ å¤æ‚çš„æ¶ˆæ¯ã€‚");
    }

    @Test // åˆ†ç»„æ–­è¨€
    void groupedAssertions() {
        // åœ¨ä¸€ä¸ªåˆ†ç»„çš„æ–­è¨€ä¸­ï¼Œæ‰€æœ‰æ–­è¨€éƒ½å°†æ‰§è¡Œï¼Œ
        // å¹¶ä¸”æ‰€æœ‰å¤±è´¥å°†ä¸€èµ·æŠ¥å‘Šã€‚
        assertAll("person",
                  () -> assertEquals("Jane", person.getFirstName()),
                  () -> assertEquals("Doe", person.getLastName())
                 );
    }

    @Test // ä¾èµ–æ–­è¨€
    void dependentAssertions() {
        // åœ¨ä»£ç å—å†…ï¼Œå¦‚æœæ–­è¨€å¤±è´¥ï¼Œåˆ™å°†è·³è¿‡åŒä¸€å—ä¸­çš„åç»­ä»£ç ã€‚
        assertAll("properties",
                  () -> {
                      String firstName = person.getFirstName();
                      assertNotNull(firstName);

                      // ä»…åœ¨å…ˆå‰çš„æ–­è¨€æœ‰æ•ˆæ—¶æ‰§è¡Œã€‚
                      assertAll("first name",
                                () -> assertTrue(firstName.startsWith("J")),
                                () -> assertTrue(firstName.endsWith("e"))
                               );
                  },
                  () -> {
                      // åˆ†ç»„æ–­è¨€ï¼Œå› æ­¤ç‹¬ç«‹äºfirst nameæ–­è¨€çš„ç»“æœè¿›è¡Œå¤„ç†ã€‚
                      String lastName = person.getLastName();
                      assertNotNull(lastName);

                      // ä»…åœ¨å…ˆå‰çš„æ–­è¨€æœ‰æ•ˆæ—¶æ‰§è¡Œã€‚
                      assertAll("last name",
                                () -> assertTrue(lastName.startsWith("D")),
                                () -> assertTrue(lastName.endsWith("e"))
                               );
                  }
                 );
    }

    @Test  // å¼‚å¸¸
    void exceptionTesting() {
        Exception exception = assertThrows(ArithmeticException.class, () ->
                                           calculator.divide(1, 0));
        assertEquals("/ by zero", exception.getMessage());
    }

    @Test // æœªè¶…æ—¶
    void timeoutNotExceeded() {
        // ä¸‹é¢çš„æ–­è¨€æˆåŠŸäº†ã€‚
        assertTimeout(ofMinutes(2), () -> {
            // æ‰§è¡Œä¸åˆ°2åˆ†é’Ÿçš„ä»»åŠ¡ã€‚
        });
    }

    @Test // æœªè¶…æ—¶ï¼Œè¿”å›ç»“æœ
    void timeoutNotExceededWithResult() {
        // ä»¥ä¸‹æ–­è¨€æˆåŠŸï¼Œå¹¶è¿”å›æä¾›çš„å¯¹è±¡ã€‚
        String actualResult = assertTimeout(ofMinutes(2), () -> {
            return "a result";
        });
        assertEquals("a result", actualResult);
    }

    @Test // æœªè¶…æ—¶ï¼Œä½¿ç”¨æ–¹æ³•å¼•ç”¨
    void timeoutNotExceededWithMethod() {
        // ä¸‹é¢çš„æ–­è¨€è°ƒç”¨æ–¹æ³•å¼•ç”¨å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚
        String actualGreeting = assertTimeout(ofMinutes(2), AssertionsDemo::greeting);
        assertEquals("Hello, World!", actualGreeting);
    }

    @Test // è¶…æ—¶
    void timeoutExceeded() {
        // ä¸‹é¢çš„æ–­è¨€å¤±è´¥ï¼Œå¹¶æ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ï¼š
        // æ‰§è¡Œè¶…å‡º10æ¯«ç§’ è¶…æ—¶æ—¶é—´91æ¯«ç§’
        assertTimeout(ofMillis(10), () -> {
            // æ¨¡æ‹Ÿè¶…è¿‡10æ¯«ç§’çš„ä»»åŠ¡ã€‚
            Thread.sleep(100);
        });
    }

    @Test //è¶…æ—¶æŠ¢å å¼ç»ˆæ­¢
    void timeoutExceededWithPreemptiveTermination() {
        // ä¸‹é¢çš„æ–­è¨€å¤±è´¥ï¼Œå¹¶æ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ï¼š
        // æ‰§è¡Œè¶…å‡º10æ¯«ç§’
        assertTimeoutPreemptively(ofMillis(10), () -> {
            // æ¨¡æ‹Ÿè¶…è¿‡10æ¯«ç§’çš„ä»»åŠ¡ã€‚
            new CountDownLatch(1).await();
        });
    }

    private static String greeting() {
        return "Hello, World!";
    }

}
```

>  ä½¿ç”¨`assertTimeoutPreemptively()`çš„æŠ¢å å¼è¶…æ—¶
>
> ä¸[å£°æ˜æ€§è¶…æ—¶]()ç›¸åï¼Œ`Assertions`ç±»ä¸­çš„å„ç§`assertTimeoutPreemptively()`æ–¹æ³•åœ¨ä¸åŒäºè°ƒç”¨ä»£ç çš„çº¿ç¨‹ä¸­æ‰§è¡Œæä¾›çš„`executable`æˆ–`supplier`ã€‚å¦‚æœåœ¨`executable`æˆ–`supplier`ä¸­æ‰§è¡Œçš„ä»£ç ä¾èµ–`java.lang.ThreadLocal`å­˜å‚¨ï¼Œåˆ™æ­¤è¡Œä¸ºå¯èƒ½ä¼šå¯¼è‡´ä¸è‰¯çš„å‰¯ä½œç”¨ã€‚
>
> ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯Springæ¡†æ¶ä¸­çš„äº‹åŠ¡æµ‹è¯•æ”¯æŒã€‚å…·ä½“æ¥è¯´ï¼ŒSpringçš„æµ‹è¯•æ”¯æŒåœ¨è°ƒç”¨æµ‹è¯•æ–¹æ³•ä¹‹å‰å°†äº‹åŠ¡çŠ¶æ€ç»‘å®šåˆ°å½“å‰çº¿ç¨‹ï¼ˆé€šè¿‡`ThreadLocal`ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœæä¾›ç»™`assertTimeoutPreemptively()`çš„`executable`æˆ–`supplier`è°ƒç”¨å‚ä¸äº‹åŠ¡çš„Springæ‰˜ç®¡ç»„ä»¶ï¼Œåˆ™è¿™äº›ç»„ä»¶æ‰€é‡‡å–çš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šä¸æµ‹è¯•æ‰˜ç®¡äº‹åŠ¡ä¸€èµ·å›æ»šã€‚ç›¸åï¼Œå³ä½¿æµ‹è¯•ç®¡ç†çš„äº‹åŠ¡è¢«å›æ»šï¼Œæ­¤ç±»æ“ä½œä¹Ÿå°†è¢«æäº¤åˆ°æŒä¹…å­˜å‚¨ï¼ˆä¾‹å¦‚ï¼Œå…³ç³»æ•°æ®åº“ï¼‰ã€‚
>
> ä¾èµ–`ThreadLocal`å­˜å‚¨çš„å…¶ä»–æ¡†æ¶å¯èƒ½ä¼šé‡åˆ°ç±»ä¼¼çš„å‰¯ä½œç”¨ã€‚

#### 2.4.1. Kotlin æ–­è¨€çš„æ”¯æŒ

JUnit Jupiterè¿˜å¸¦æœ‰ä¸€äº›æ–­è¨€æ–¹æ³•ï¼Œå¾ˆé€‚åˆåœ¨Kotlinä¸­ä½¿ç”¨ã€‚ æ‰€æœ‰JUnit Jupiter Kotlinæ–­è¨€éƒ½æ˜¯`org.junit.jupiter.api`åŒ…ä¸­çš„é¡¶çº§å‡½æ•°ã€‚

``` kotlin
import example.domain.Person
import example.util.Calculator
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Assertions.assertTrue
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertAll
import org.junit.jupiter.api.assertDoesNotThrow
import org.junit.jupiter.api.assertThrows
import org.junit.jupiter.api.assertTimeout
import org.junit.jupiter.api.assertTimeoutPreemptively
import java.time.Duration

class KotlinAssertionsDemo {

    private val person = Person("Jane", "Doe")
    private val people = setOf(person, Person("John", "Doe"))

    @Test
    fun `exception absence testing`() {
        val calculator = Calculator()
        val result = assertDoesNotThrow("Should not throw an exception") {
            calculator.divide(0, 1)
        }
        assertEquals(0, result)
    }

    @Test
    fun `expected exception testing`() {
        val calculator = Calculator()
        val exception = assertThrows<ArithmeticException> ("Should throw an exception") {
            calculator.divide(1, 0)
        }
        assertEquals("/ by zero", exception.message)
    }

    @Test
    fun `grouped assertions`() {
        assertAll("Person properties",
            { assertEquals("Jane", person.firstName) },
            { assertEquals("Doe", person.lastName) }
        )
    }

    @Test
    fun `grouped assertions from a stream`() {
        assertAll("People with first name starting with J",
            people
                .stream()
                .map {
                    // This mapping returns Stream<() -> Unit>
                    { assertTrue(it.firstName.startsWith("J")) }
                }
        )
    }

    @Test
    fun `grouped assertions from a collection`() {
        assertAll("People with last name of Doe",
            people.map { { assertEquals("Doe", it.lastName) } }
        )
    }

    @Test
    fun `timeout not exceeded testing`() {
        val fibonacciCalculator = FibonacciCalculator()
        val result = assertTimeout(Duration.ofMillis(100)) {
            fibonacciCalculator.fib(14)
        }
        assertEquals(377, result)
    }

    @Test
    fun `timeout exceeded with preemptive termination`() {
        // The following assertion fails with an error message similar to:
        // execution timed out after 10 ms
        assertTimeoutPreemptively(Duration.ofMillis(10)) {
            // Simulate task that takes more than 10 ms.
            Thread.sleep(100)
        }
    }
}
```

#### 2.4.2. ç¬¬ä¸‰æ–¹æ–­è¨€åº“

å°½ç®¡JUnit Jupiteræä¾›çš„æ–­è¨€å·¥å…·è¶³ä»¥åº”ä»˜è®¸å¤šæµ‹è¯•åœºæ™¯ï¼Œä½†æœ‰æ—¶è¿˜æ˜¯**éœ€è¦æ›´å¤šåŠŸèƒ½å’Œé™„åŠ çš„åŠŸèƒ½**ï¼Œæ¯”å¦‚åŒ¹é…å™¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJUnitå›¢é˜Ÿ**å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹æ–­è¨€åº“**ï¼Œå¦‚AssertJï¼ŒHamcrestï¼ŒTruthç­‰ã€‚å› æ­¤ï¼Œå¼€å‘äººå‘˜å¯ä»¥è‡ªç”±ä½¿ç”¨ä»–ä»¬é€‰æ‹©çš„æ–­è¨€åº“ã€‚ 

æ¯”å¦‚ï¼Œå¯ä»¥ä½¿ç”¨åŒ¹é…å™¨ *matchers* å’Œæµå¼APIçš„ç»„åˆ**ä½¿æ–­è¨€æ›´å…·æè¿°æ€§å’Œå¯è¯»æ€§**ã€‚ç„¶è€Œï¼ŒJUnit Jupiterçš„`org.junit.jupiter.api.Assertions`ç±»æ²¡æœ‰æä¾›åƒJUnit 4çš„`org.junit.Assert`ç±»ä¸­çš„èƒ½æ¥å—ä¸€ä¸ªHamcrest [`Matcher`](https://junit.org/junit4/javadoc/latest/org/hamcrest/Matcher.html)çš„é‚£æ ·çš„[`assertThat()`](https://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThat)æ–¹æ³•ã€‚ç›¸åï¼Œ**é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨ç”±ç¬¬ä¸‰æ–¹æ–­è¨€åº“æä¾›çš„å¯¹åŒ¹é…å™¨çš„å†…ç½®æ”¯æŒ**ã€‚

ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•åœ¨JUnit Jupiteræµ‹è¯•ä¸­ä½¿ç”¨æ¥è‡ª Hamcrest çš„`assertThat()`æ”¯æŒã€‚åªè¦ Hamcrest åº“è¢«æ·»åŠ åˆ°ç±»è·¯å¾„ä¸­ï¼Œå°±å¯ä»¥é™æ€åœ°å¯¼å…¥`assertThat()`ã€`is()`å’Œ`equalTo()`ç­‰æ–¹æ³•ï¼Œç„¶ååœ¨ä¸‹é¢çš„`assertWithHamcrestMatcher()`æ–¹æ³•ä¸­è¿™æ ·çš„æµ‹è¯•ä¸­ä½¿ç”¨å®ƒä»¬ã€‚

``` java
import static org.hamcrest.CoreMatchers.equalTo;
import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.MatcherAssert.assertThat;

import example.util.Calculator;

import org.junit.jupiter.api.Test;

class HamcrestAssertionsDemo {

    private final Calculator calculator = new Calculator();

    @Test
    void assertWithHamcrestMatcher() {
        assertThat(calculator.subtract(4, 1), is(equalTo(3)));
    }

}
```

å½“ç„¶ï¼ŒåŸºäº JUnit4 ç¼–ç¨‹æ¨¡å‹çš„é—ç•™æµ‹è¯•å¯ä»¥ç»§ç»­ä½¿ç”¨`org.junit.Assert#assertThat`ã€‚

### 2.5. å‡è®¾

JUnit Jupiteré™„å¸¦äº†JUnit 4æä¾›çš„å‡è®¾æ–¹æ³•çš„å­é›†ï¼Œå¹¶æ·»åŠ äº†ä¸€äº›éå¸¸é€‚åˆä¸Java 8 lambdaè¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨ä¸€èµ·ä½¿ç”¨çš„æ–¹æ³•ã€‚ æ‰€æœ‰JUnit Jupiterå‡è®¾éƒ½æ˜¯`org.junit.jupiter.api.Assumptions`ç±»ä¸­çš„é™æ€æ–¹æ³•ã€‚

``` java
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assumptions.assumeTrue;
import static org.junit.jupiter.api.Assumptions.assumingThat;

import example.util.Calculator;

import org.junit.jupiter.api.Test;

class AssumptionsDemo {

    private final Calculator calculator = new Calculator();

    @Test
    void testOnlyOnCiServer() {// åªåœ¨ CI æœåŠ¡å™¨ä¸Šæµ‹è¯•
        assumeTrue("CI".equals(System.getenv("ENV")));
        // å…¶ä½™æµ‹è¯•
    }

    @Test
    void testOnlyOnDeveloperWorkstation() {// åªåœ¨å¼€å‘è€…å·¥ä½œç«™ä¸Šæµ‹è¯•
        assumeTrue("DEV".equals(System.getenv("ENV")),
            () -> "ä¸­æ­¢æµ‹è¯•ï¼šä¸åœ¨å¼€å‘äººå‘˜å·¥ä½œç«™ä¸Š");
        // å…¶ä½™æµ‹è¯•
    }

    @Test
    void testInAllEnvironments() {
        assumingThat("CI".equals(System.getenv("ENV")),
            () -> {
                // ä»…åœ¨CIæœåŠ¡å™¨ä¸Šæ‰§è¡Œè¿™äº›æ–­è¨€
                assertEquals(2, calculator.divide(4, 2));
            });

        // åœ¨æ‰€æœ‰ç¯å¢ƒä¸­æ‰§è¡Œè¿™äº›æ–­è¨€
        assertEquals(42, calculator.multiply(6, 7));
    }

}
```

> ä»JUnit Jupiter 5.4å¼€å§‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨JUnit 4çš„`org.junit.Assume`ç±»ä¸­çš„æ–¹æ³•è¿›è¡Œå‡è®¾ã€‚ å…·ä½“æ¥è¯´ï¼ŒJUnit Jupiteræ”¯æŒJUnit 4çš„`AssumptionViolatedException`ï¼Œä»¥è¡¨æ˜åº”è¯¥**ä¸­æ­¢æµ‹è¯•è€Œä¸æ˜¯å°†å…¶æ ‡è®°ä¸ºå¤±è´¥**ã€‚ 

### 2.6. ç¦ç”¨æµ‹è¯•

å¯ä»¥é€šè¿‡`@Disabled`æ³¨è§£ï¼Œé€šè¿‡[æ¡ä»¶æµ‹è¯•æ‰§è¡Œ](https://junit.org/junit5/docs/current/user-guide/#writing-tests-conditional-execution)ä¸­è®¨è®ºçš„æ³¨è§£ä¹‹ä¸€ï¼Œæˆ–è€…é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰[`ExecutionCondition`](https://junit.org/junit5/docs/current/user-guide/#extensions-conditions)æ¥**ç¦ç”¨æ•´ä¸ªæµ‹è¯•ç±»ï¼Œæˆ–è€…å•ä¸ªæµ‹è¯•æ–¹æ³•**ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ª`@Disabled`æµ‹è¯•ç±»ã€‚

``` java
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

@Disabled("ç¦ç”¨æµ‹è¯•ï¼Œç›´åˆ°bug#99è¢«ä¿®å¤")
class DisabledClassDemo {

    @Test
    void testWillBeSkipped() {
    }

}
```

è¿™é‡Œæœ‰ä¸€ä¸ªåŒ…å«`@Disabled`æµ‹è¯•æ–¹æ³•çš„æµ‹è¯•ç±»

``` java
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

class DisabledTestsDemo {

    @Disabled("ç¦ç”¨æµ‹è¯•ï¼Œç›´åˆ°bug#42è¢«è§£å†³")
    @Test
    void testWillBeSkipped() {
    }

    @Test
    void testWillBeExecuted() {
    }

}
```

> `@Disabled`å¯ä»¥åœ¨ä¸æä¾›ä»»ä½•ç†ç”±çš„æƒ…å†µä¸‹è¢«å£°æ˜ï¼› ä½†æ˜¯ï¼ŒJUnitå›¢é˜Ÿ**å»ºè®®å¼€å‘äººå‘˜æä¾›ä¸€ä¸ªç®€çŸ­çš„è§£é‡Šï¼Œè¯´æ˜ä¸ºä»€ä¹ˆæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•è¢«ç¦ç”¨**ã€‚å› æ­¤ï¼Œä¸Šé¢çš„ä¾‹å­éƒ½æ˜¾ç¤ºäº†ä½¿ç”¨çš„åŸå› â€”â€”ä¾‹å¦‚`@Disabled("ç¦ç”¨æµ‹è¯•ï¼Œç›´åˆ°bug#43è¢«è§£å†³")`ã€‚ å‡ºäºå¯è‡ªåŠ¨è·Ÿè¸ªçš„åŸå› ï¼ŒæŸäº›å¼€å‘å›¢é˜Ÿç”šè‡³è¦æ±‚é—®é¢˜è·Ÿè¸ªå·çš„å­˜åœ¨ï¼Œç­‰ç­‰ã€‚ 

### 2.7. æ¡ä»¶æµ‹è¯•æ‰§è¡Œ

JUnit Jupiterä¸­çš„`ExecutionCondition`æ‰©å±•APIå…è®¸å¼€å‘äººå‘˜**æ ¹æ®ç‰¹å®šæ¡ä»¶ä»¥ç¼–ç¨‹æ–¹å¼å¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•**ã€‚è¿™ç§æƒ…å†µæœ€ç®€å•çš„ä¾‹å­æ˜¯å†…ç½®çš„`DisabledCondition`ï¼Œå®ƒæ”¯æŒ`@Disabled`æ³¨è§£ï¼ˆè¯·å‚é˜…[ç¦ç”¨æµ‹è¯•](#2.6. ç¦ç”¨æµ‹è¯•)ï¼‰ã€‚é™¤äº†`@Disabled`ä¹‹å¤–ï¼ŒJUnit Jupiterè¿˜æ”¯æŒ`org.JUnit.Jupiter.api.condition`åŒ…ä¸­çš„å…¶ä»–ä¸€äº›åŸºäºæ³¨è§£çš„æ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶å…è®¸å¼€å‘äººå‘˜**ä»¥å£°æ˜æ–¹å¼å¯ç”¨æˆ–ç¦ç”¨å®¹å™¨å’Œæµ‹è¯•**ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ä»¥ä¸‹å„èŠ‚ã€‚

>   ç»„åˆæ³¨è§£
>
>   è¯·æ³¨æ„ï¼Œä»¥ä¸‹å„èŠ‚ä¸­åˆ—å‡ºçš„ä»»ä½•æ¡ä»¶æ³¨è§£ä¹Ÿå¯ä»¥ç”¨ä½œå…ƒæ³¨è§£ï¼Œä»¥ä¾¿åˆ›å»ºè‡ªå®šä¹‰çš„ç»„åˆæ³¨è§£ã€‚ ä¾‹å¦‚ï¼Œ`@EnabledOnOs`æ¼”ç¤ºä¸­çš„`@TestOnMac`æ³¨è§£å±•ç¤ºäº†å¦‚ä½•å°†`@Test`å’Œ`@EnabledOnOs`åˆå¹¶åˆ°ä¸€ä¸ªå¯é‡ç”¨æ³¨è§£ä¸­ã€‚

>   é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ä»¥ä¸‹å„èŠ‚ä¸­åˆ—å‡ºçš„æ¯ä¸ªæ¡ä»¶æ³¨è§£åªèƒ½åœ¨ç»™å®šçš„æµ‹è¯•æ¥å£ï¼Œæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸Šå£°æ˜ä¸€æ¬¡ã€‚ å¦‚æœæ¡ä»¶æ³¨è§£åœ¨ç»™å®šå…ƒç´ ä¸Šå¤šæ¬¡ç›´æ¥å­˜åœ¨ï¼Œé—´æ¥å­˜åœ¨æˆ–å…ƒå­˜åœ¨ï¼Œåˆ™ä»…å°†ä½¿ç”¨JUnitå‘ç°çš„ç¬¬ä¸€ä¸ªæ­¤ç±»æ³¨è§£ï¼›ä»»ä½•å…¶ä»–å£°æ˜å°†è¢«é™é»˜å¿½ç•¥ã€‚ ä½†æ˜¯è¯·æ³¨æ„ï¼Œæ¯ä¸ªæ¡ä»¶æ³¨è§£éƒ½å¯ä»¥ä¸`org.junit.jupiter.api.condition`åŒ…ä¸­çš„å…¶ä»–æ¡ä»¶æ³¨è§£ç»“åˆä½¿ç”¨ã€‚
>

#### 2.7.1. æ“ä½œç³»ç»Ÿæ¡ä»¶

å¯ä»¥é€šè¿‡`@EnabledOnOs`å’Œ`@DisabledOnOs`æ³¨è§£åœ¨ç‰¹å®šçš„æ“ä½œç³»ç»Ÿä¸Šå¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•ã€‚

``` java
@Test
@EnabledOnOs(MAC)
void onlyOnMacOs() {
    // ...
}

@TestOnMac
void testOnMac() {
    // ...
}

@Test
@EnabledOnOs({ LINUX, MAC })
void onLinuxOrMac() {
    // ...
}

@Test
@DisabledOnOs(WINDOWS)
void notOnWindows() {
    // ...
}

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Test
@EnabledOnOs(MAC)
@interface TestOnMac {
}
```

#### 2.7.2. Javaè¿è¡Œæ—¶ç¯å¢ƒæ¡ä»¶

å¯ä»¥é€šè¿‡`@EnabledOnJre`å’Œ`@DisabledOnJre`æ³¨è§£åœ¨ç‰¹å®šç‰ˆæœ¬çš„Java Runtime Environmentï¼ˆJREï¼‰ä¸Šå¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•ï¼Œæˆ–è€…é€šè¿‡`@EnabledForJreRange`å’Œ`@DisabledForJreRange`æ³¨è§£åœ¨ç‰¹å®šèŒƒå›´çš„JREä¸Šå¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•ã€‚èŒƒå›´é»˜è®¤ä¸º`JRE.JAVA_8`ä½œä¸ºä¸‹è¾¹ç•Œï¼ˆæœ€å°å€¼ï¼‰ï¼Œè€Œ`JRE.OTHER`ä½œä¸ºä¸Šè¾¹ç•Œï¼ˆæœ€å¤§å€¼ï¼‰ï¼Œå…è®¸ä½¿ç”¨åŠå¼€èŒƒå›´ã€‚

``` java
@Test
@EnabledOnJre(JAVA_8)
void onlyOnJava8() {
    // ...
}

@Test
@EnabledOnJre({ JAVA_9, JAVA_10 })
void onJava9Or10() {
    // ...
}

@Test
@EnabledForJreRange(min = JAVA_9, max = JAVA_11)
void fromJava9to11() {
    // ...
}

@Test
@EnabledForJreRange(min = JAVA_9)
void fromJava9toCurrentJavaFeatureNumber() {
    // ...
}

@Test
@EnabledForJreRange(max = JAVA_11)
void fromJava8To11() {
    // ...
}

@Test
@DisabledOnJre(JAVA_9)
void notOnJava9() {
    // ...
}

@Test
@DisabledForJreRange(min = JAVA_9, max = JAVA_11)
void notFromJava9to11() {
    // ...
}

@Test
@DisabledForJreRange(min = JAVA_9)
void notFromJava9toCurrentJavaFeatureNumber() {
    // ...
}

@Test
@DisabledForJreRange(max = JAVA_11)
void notFromJava8to11() {
    // ...
}
```

#### 2.7.3. ç³»ç»Ÿå±æ€§æ¡ä»¶

å¯ä»¥é€šè¿‡`@EnabledIfSystemProperty`å’Œ`@DisabledIfSystemProperty`æ³¨è§£åŸºäºå‘½åçš„JVMç³»ç»Ÿå±æ€§çš„å€¼æ¥å¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•ã€‚é€šè¿‡ `matches` å±æ€§æä¾›çš„å€¼å°†è¢«è§£é‡Šä¸ºæ­£åˆ™è¡¨è¾¾å¼ã€‚

``` java
@Test
@EnabledIfSystemProperty(named = "os.arch", matches = ".*64.*")
void onlyOn64BitArchitectures() {
    // ...
}

@Test
@DisabledIfSystemProperty(named = "ci-server", matches = "true")
void notOnCiServer() {
    // ...
}
```

> ä»JUnit Jupiter 5.6å¼€å§‹ï¼Œ`@EnabledIfSystemProperty`å’Œ`@DisabledIfSystemProperty`æ˜¯å¯é‡å¤çš„æ³¨è§£ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨æµ‹è¯•æ¥å£ï¼Œæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸Šå¤šæ¬¡å£°æ˜è¿™äº›æ³¨è§£ã€‚ å…·ä½“è€Œè¨€ï¼Œå¦‚æœè¿™äº›æ³¨è§£ç›´æ¥å­˜åœ¨ï¼Œé—´æ¥å­˜åœ¨æˆ–å…ƒå­˜åœ¨äºç»™å®šå…ƒç´ ä¸Šï¼Œåˆ™å°†è¢«å‘ç°ã€‚

#### 2.7.4. ç¯å¢ƒå˜é‡æ¡ä»¶

å¯ä»¥é€šè¿‡`@EnabledIfEnvironmentVariable`å’Œ`@DisabledIfEnvironmentVariable`æ³¨è§£æ ¹æ®åº•å±‚æ“ä½œç³»ç»Ÿä¸­æŒ‡å®šçš„ç¯å¢ƒå˜é‡çš„å€¼æ¥å¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•ã€‚é€šè¿‡`matches`å±æ€§æä¾›çš„å€¼å°†è¢«è§£é‡Šä¸ºæ­£åˆ™è¡¨è¾¾å¼ã€‚

``` java
@Test
@EnabledIfEnvironmentVariable(named = "ENV", matches = "staging-server")
void onlyOnStagingServer() {
    // ...
}

@Test
@DisabledIfEnvironmentVariable(named = "ENV", matches = ".*development.*")
void notOnDeveloperWorkstation() {
    // ...
}
```

> ä»JUnit Jupiter 5.6å¼€å§‹ï¼Œ`@EnabledIfEnvironmentVariable`å’Œ`@DisabledIfEnvironmentVariable`æ˜¯å¯é‡å¤çš„æ³¨è§£ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨æµ‹è¯•æ¥å£ï¼Œæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸Šå¤šæ¬¡å£°æ˜è¿™äº›æ³¨è§£ã€‚ å…·ä½“è€Œè¨€ï¼Œå¦‚æœè¿™äº›æ³¨è§£ç›´æ¥å­˜åœ¨ï¼Œé—´æ¥å­˜åœ¨æˆ–å…ƒå­˜åœ¨äºç»™å®šå…ƒç´ ä¸Šï¼Œåˆ™å°†è¢«å‘ç°ã€‚

#### 2.7.5. åŸºäºè„šæœ¬çš„æ¡ä»¶

>  ä¸å»ºè®®é€šè¿‡`@EnabledIf`å’Œ`@DisabledIf`æ‰§è¡Œæ¡ä»¶æµ‹è¯•ï¼Œåœ¨å°†æ¥çš„JUnit Jupiterç‰ˆæœ¬ä¸­ä¼šå°†å…¶åˆ é™¤ã€‚ 
>
>  **5.6.0 å·²åˆ é™¤è¯¥æ³¨è§£**

JUnit Jupiteræä¾›äº†å¯ç”¨æˆ–ç¦ç”¨å®¹å™¨æˆ–æµ‹è¯•çš„èƒ½åŠ›ï¼Œå…·ä½“å–å†³äºé€šè¿‡`@EnabledIf`æˆ–`@DisabledIf`æ³¨è§£é…ç½®çš„è„šæœ¬çš„è¯„ä¼°ã€‚ å¯ä»¥ä½¿ç”¨JavaScriptï¼ŒGroovyæˆ–æ”¯æŒJSR 223å®šä¹‰çš„Java è„šæœ¬APIçš„ä»»ä½•å…¶ä»–è„šæœ¬è¯­è¨€ç¼–å†™è„šæœ¬ã€‚

> å¦‚æœè„šæœ¬çš„é€»è¾‘ä»…å–å†³äºå½“å‰çš„æ“ä½œç³»ç»Ÿï¼Œå½“å‰çš„Java Runtime Environmentç‰ˆæœ¬ï¼Œç‰¹å®šçš„JVMç³»ç»Ÿå±æ€§æˆ–ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼Œåˆ™åº”è€ƒè™‘ä½¿ç”¨ä¸“ç”¨äºæ­¤ç›®çš„çš„å†…ç½®æ³¨è§£ä¹‹ä¸€ã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æœ¬ç« å‰é¢çš„éƒ¨åˆ†ã€‚ 

> å¦‚æœä½ å‘ç°è‡ªå·±å¤šæ¬¡ä½¿ç”¨åŸºäºè„šæœ¬çš„ç›¸åŒæ¡ä»¶ï¼Œè¯·è€ƒè™‘ç¼–å†™ä¸“ç”¨çš„`ExecutionCondition`æ‰©å±•ï¼Œä»¥ä¾¿ä»¥æ›´å¿«ï¼Œç±»å‹å®‰å…¨ä¸”æ›´å¯ç»´æŠ¤çš„æ–¹å¼å®ç°æ¡ä»¶ã€‚ 

``` java
@Test // é™æ€ JavaScript è¡¨è¾¾å¼.
@EnabledIf("2 * 3 == 6")
void willBeExecuted() {
    // ...
}

@RepeatedTest(10) // åŠ¨æ€ JavaScript è¡¨è¾¾å¼.
@DisabledIf("Math.random() < 0.314159")
void mightNotBeExecuted() {
    // ...
}

@Test // æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•ç»‘å®šçš„ç³»ç»Ÿå±æ€§
@DisabledIf("/32/.test(systemProperty.get('os.arch'))")
void disabledOn32BitArchitectures() {
    assertFalse(System.getProperty("os.arch").contains("32"));
}

@Test
@EnabledIf("'CI' == systemEnvironment.get('ENV')")
void onlyOnCiServer() {
    assertTrue("CI".equals(System.getenv("ENV")));
}

@Test // å¤šè¡Œè„šæœ¬, è‡ªå®šä¹‰å¼•æ“åç§°å¹¶è‡ªå®šä¹‰åŸå› 
@EnabledIf(value = {
    "load('nashorn:mozilla_compat.js')",
    "importPackage(java.time)",
    "",
    "var today = LocalDate.now()",
    "var tomorrow = today.plusDays(1)",
    "tomorrow.isAfter(today)"
},
           engine = "nashorn",
           reason = "Self-fulfilling: {result}")
void theDayAfterTomorrow() {
    LocalDate today = LocalDate.now();
    LocalDate tomorrow = today.plusDays(1);
    assertTrue(tomorrow.isAfter(today));
}
```

##### Script ç»‘å®š

ä¸‹é¢çš„åç§°è¢«ç»‘å®šåˆ°äº†æ¯ä¸ªè„šæœ¬ä¸Šä¸‹æ–‡ï¼Œå› æ­¤å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚ å­˜å–å™¨é€šè¿‡ç®€å•çš„`String get(String name)`æ–¹æ³•æä¾›å¯¹ç±»æ˜ å°„çš„ç»“æ„çš„è®¿é—®ã€‚

| åç§°                          | ç±»å‹       | æè¿°                           |
| ----------------------------- | ---------- | ------------------------------ |
| `systemEnvironment`           | *accessor* | æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡å­˜å–å™¨accessor |
| `systemProperty`              | *accessor* | JVMç³»ç»Ÿå±æ€§å­˜å–å™¨accessor.     |
| `junitConfigurationParameter` | *accessor* | é…ç½®å‚æ•°å­˜å–å™¨accessor.        |
| `junitDisplayName`            | `String`   | æ˜¾ç¤ºæµ‹è¯•æˆ–å®¹å™¨çš„åç§°           |
| `junitTags`                   | `Set`      | åˆ†é…ç»™æµ‹è¯•æˆ–å®¹å™¨çš„æ‰€æœ‰æ ‡ç­¾     |
| `junitUniqueId`               | `String`   | æµ‹è¯•æˆ–å®¹å™¨çš„å”¯ä¸€ID             |

#### 2.7.6 è‡ªå®šä¹‰æ¡ä»¶

å®¹å™¨æˆ–æµ‹è¯•å¯ä»¥æ ¹æ®é€šè¿‡ `@EnabledIf` å’Œ `@DisabledIf` æ³¨è§£çš„æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼å¯ç”¨æˆ–ç¦ç”¨ã€‚è¯¥æ–¹æ³•é€šè¿‡å…¶åç§°æä¾›ç»™æ³¨è§£ã€‚å¦‚æœéœ€è¦ï¼Œæ¡ä»¶æ–¹æ³•å¯ä»¥æ¥å— `ExtensionContext` ç±»å‹çš„å•ä¸ªå‚æ•°ã€‚

``` java
@Test
@EnabledIf("customCondition")
void enabled() {
    // ...
}

@Test
@DisabledIf("customCondition")
void disabled() {
    // ...
}

boolean customCondition() {
    return true;
}
```

å¦å¤–ï¼Œæ¡ä»¶æ–¹æ³•å¯ä»¥ä½äºæµ‹è¯•ç±»ä¹‹å¤–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»é€šè¿‡å®ƒçš„å®Œå…¨é™å®šåå¼•ç”¨ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚

``` java
package example;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.condition.EnabledIf;

class ExternalCustomConditionDemo {

    @Test
    @EnabledIf("example.ExternalCondition#customCondition")
    void enabled() {
        // ...
    }

}

class ExternalCondition {

    static boolean customCondition() {
        return true;
    }

}
```

> å½“åœ¨ç±»çº§åˆ«ä½¿ç”¨ `@EnabledIf` æˆ– `@DisabledIf` æ—¶ï¼Œæ¡ä»¶æ–¹æ³•å¿…é¡»å§‹ç»ˆæ˜¯ `static` çš„ã€‚ä½äºå¤–éƒ¨ç±»ä¸­çš„æ¡ä»¶æ–¹æ³•ä¹Ÿå¿…é¡»æ˜¯ `static` çš„ã€‚åœ¨å…¶ä»–ä»»ä½•æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½å¯ä»¥åŒæ—¶ä½¿ç”¨é™æ€æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ã€‚

### 2.8.  æ ‡è®°å’Œè¿‡æ»¤ 

å¯ä»¥é€šè¿‡`@Tag`æ³¨è§£æ ‡è®°æµ‹è¯•ç±»å’Œæ–¹æ³•ã€‚è¿™äº›æ ‡è®°ç¨åå¯ä»¥ç”¨æ¥è¿‡æ»¤[æµ‹è¯•å‘ç°å’Œæ‰§è¡Œ](https://junit.org/junit5/docs/current/user-guide/#running-tests)ã€‚æœ‰å…³JUnitå¹³å°ä¸­æ ‡è®°æ”¯æŒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[æ ‡è®°](https://junit.org/junit5/docs/current/user-guide/#running-tests-tags)éƒ¨åˆ†ã€‚


``` java
import org.junit.jupiter.api.Tag;
import org.junit.jupiter.api.Test;

@Tag("fast")
@Tag("model")
class TaggingDemo {

    @Test
    @Tag("taxes")
    void testingTaxCalculation() {
    }

}
```

> æœ‰å…³æ¼”ç¤ºå¦‚ä½•ä¸ºæ ‡ç­¾åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£çš„ç¤ºä¾‹ï¼Œè¯·å‚è§[å…ƒæ³¨è§£å’Œç»„åˆæ³¨è§£](#2.1.1. å…ƒæ³¨è§£å’Œç»„åˆæ³¨è§£)ã€‚ 

### 2.9. æµ‹è¯•æ‰§è¡Œé¡ºåº

é»˜è®¤æƒ…å†µä¸‹ï¼Œæµ‹è¯•æ–¹æ³•å°†ä½¿ç”¨ä¸€ç§ç¡®å®šçš„ä½†æ•…æ„ä¸æ˜æ˜¾çš„ç®—æ³•æ¥æ’åºã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æµ‹è¯•å¥—ä»¶çš„åç»­è¿è¡Œä»¥ç›¸åŒçš„é¡ºåºæ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œä»è€Œå®ç°å¯é‡å¤çš„æ„å»ºã€‚

#### 2.9.1 æ–¹æ³•é¡ºåº

å°½ç®¡çœŸæ­£çš„å•å…ƒæµ‹è¯•é€šå¸¸ä¸åº”è¯¥ä¾èµ–äºå®ƒä»¬æ‰§è¡Œçš„é¡ºåºï¼Œä½†æœ‰æ—¶è¿˜æ˜¯æœ‰å¿…è¦å¼ºåˆ¶æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æµ‹è¯•æ–¹æ³•æ‰§è¡Œé¡ºåº â€”â€” ä¾‹å¦‚ï¼Œåœ¨ç¼–å†™é›†æˆæµ‹è¯•æˆ–åŠŸèƒ½æµ‹è¯•æ—¶ï¼Œæµ‹è¯•çš„é¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œå°¤å…¶æ˜¯ä¸ `@TestInstance(Lifecycle.PER_CLASS)` ç»“åˆä½¿ç”¨æ—¶ã€‚

è¦æ§åˆ¶æµ‹è¯•æ–¹æ³•æ‰§è¡Œçš„é¡ºåºï¼Œè¯·ä½¿ç”¨`@TestMethodOrder`æ³¨è§£æµ‹è¯•ç±»æˆ–æµ‹è¯•æ¥å£ï¼Œå¹¶æŒ‡å®šæ‰€éœ€çš„`MethodOrderer`å®ç°ã€‚ æ‚¨å¯ä»¥å®ç°è‡ªå·±çš„è‡ªå®šä¹‰ `MethodOrderer` æˆ–ä½¿ç”¨ä»¥ä¸‹å†…ç½®çš„`MethodOrderer`å®ç°ä¹‹ä¸€ã€‚

- `MethodOrderer.DisplayName`ï¼šæ ¹æ®æµ‹è¯•æ–¹æ³•çš„æ˜¾ç¤ºåç§°æŒ‰å­—æ¯æ•°å­—é¡ºåºæ’åºï¼ˆå‚è§æ˜¾ç¤º[åç§°ç”Ÿæˆä¼˜å…ˆè§„åˆ™](https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator-precedence-rules)ï¼‰ã€‚
- `MethodOrderer.MethodName`ï¼šæ®æµ‹è¯•æ–¹æ³•çš„åç§°å’Œå½¢å¼å‚æ•°åˆ—è¡¨ï¼ŒæŒ‰å­—æ¯æ•°å­—é¡ºåºæ’åºã€‚
- `MethodOrderer.OrderAnnotation`ï¼šæ ¹æ®é€šè¿‡`@Order`æ³¨è§£æŒ‡å®šçš„å€¼å¯¹æµ‹è¯•æ–¹æ³•è¿›è¡Œæ•°å€¼æ’åºã€‚
- `MethodOrderer.Random`ï¼šå¯¹æµ‹è¯•æ–¹æ³•è¿›è¡Œä¼ªéšæœºæ’åºï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰ç§å­çš„é…ç½®ã€‚
- `MethodOrderer.Alphanumeric`ï¼šæ ¹æ®æµ‹è¯•æ–¹æ³•çš„åç§°å’Œå½¢å¼å‚æ•°åˆ—è¡¨ï¼ŒæŒ‰å­—æ¯æ•°å­—é¡ºåºæ’åºã€‚**å·²åºŸå¼ƒï¼Œå¹¶å°†åœ¨ 6.0 ç‰ˆæœ¬ç§»é™¤ï¼Œå»ºè®®ä½¿ç”¨ `MethodOrderer.MethodName`æ›¿ä»£**

> å¦è¯·å‚é˜… [Wrapping Behavior of Callbacks](https://junit.org/junit5/docs/current/user-guide/#extensions-execution-order-wrapping-behavior)

ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä¿è¯æµ‹è¯•æ–¹æ³•æŒ‰ç…§é€šè¿‡`@Order`æ³¨è§£æŒ‡å®šçš„é¡ºåºæ‰§è¡Œã€‚

``` java
import org.junit.jupiter.api.MethodOrderer.OrderAnnotation;
import org.junit.jupiter.api.Order;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestMethodOrder;

@TestMethodOrder(OrderAnnotation.class)
class OrderedTestsDemo {

    @Test
    @Order(1)
    void nullValues() {
        // perform assertions against null values
    }

    @Test
    @Order(2)
    void emptyValues() {
        // perform assertions against empty values
    }

    @Test
    @Order(3)
    void validValues() {
        // perform assertions against valid values
    }

}
```

##### è®¾ç½®é»˜è®¤æ–¹æ³•

æ‚¨å¯ä»¥ä½¿ç”¨[é…ç½®å‚æ•°](https://junit.org/junit5/docs/current/user-guide/#running-tests-config-params) `junit.jupiter.testmethod.order.default` æ¥æŒ‡å®šæ‚¨å¸Œæœ›é»˜è®¤ä½¿ç”¨çš„ `MethodOrderer` çš„å…¨é™å®šç±»åã€‚å°±åƒé€šè¿‡`@TestMethodOrder` æ³¨è§£é…ç½®çš„æ’åºå™¨ä¸€æ ·ï¼Œæä¾›çš„ç±»å¿…é¡»å®ç° `MethodOrderer` æ¥å£ã€‚é™¤é `@TestMethodOrder` æ³¨è§£å‡ºç°åœ¨å°é—­çš„æµ‹è¯•ç±»æˆ–æµ‹è¯•æ¥å£ä¸Šï¼Œå¦åˆ™é»˜è®¤æ’åºå™¨å°†ç”¨äºæ‰€æœ‰æµ‹è¯• ã€‚

æ¯”å¦‚ï¼Œæƒ³è¦é»˜è®¤ä½¿ç”¨ `MethodOrderer.OrderAnnotation` æ–¹æ³•æ’åºå™¨ï¼Œåº”è¯¥å°†é…ç½®å‚æ•°è®¾ç½®ä¸ºç›¸åº”çš„å®Œå…¨é™å®šç±»åï¼ˆæ¯”å¦‚ï¼Œåœ¨`src/test/resources/junit-platform.properties` ä¸­ï¼‰ï¼š

``` properties
junit.jupiter.testmethod.order.default = \
    org.junit.jupiter.api.MethodOrderer$OrderAnnotation
```

åŒæ ·ï¼Œä½ å¯ä»¥æŒ‡å®šå®ç° `MethodOrderer` çš„ä»»ä½•è‡ªå®šä¹‰ç±»çš„å®Œå…¨é™å®šåç§°ã€‚ 

#### 2.9.2 ç±»æ’åº

å°½ç®¡æµ‹è¯•ç±»é€šå¸¸ä¸åº”è¯¥ä¾èµ–äºå®ƒä»¬æ‰§è¡Œçš„é¡ºåºï¼Œä½†æœ‰æ—¶éœ€è¦å¼ºåˆ¶ä¸€ä¸ªæ‰§è¡Œç‰¹å®šçš„æµ‹è¯•ç±»æ‰§è¡Œé¡ºåºã€‚æ‚¨å¯èƒ½å¸Œæœ›ä»¥éšæœºé¡ºåºæ‰§è¡Œæµ‹è¯•ç±»ï¼Œä»¥ç¡®ä¿æµ‹è¯•ç±»ä¹‹é—´æ²¡æœ‰å¶ç„¶çš„ä¾èµ–å…³ç³»ï¼Œæˆ–è€…æ‚¨å¯èƒ½å¸Œæœ›æŒ‰ç…§ä»¥ä¸‹åœºæ™¯ä¸­æ¦‚è¿°çš„é¡ºåºå¯¹æµ‹è¯•ç±»è¿›è¡Œæ’åºï¼Œä»¥ä¼˜åŒ–æ„å»ºæ—¶é—´ã€‚

- å…ˆè¿è¡Œä»¥å‰å¤±è´¥çš„æµ‹è¯•å’Œæ›´å¿«çš„æµ‹è¯•ï¼šâ€œå¿«é€Ÿå¤±è´¥â€ æ¨¡å¼
- å¯ç”¨å¹¶è¡Œæ‰§è¡Œåï¼Œé¦–å…ˆè¿è¡Œè¾ƒé•¿çš„æµ‹è¯•ï¼šâ€œæœ€çŸ­æµ‹è¯•è®¡åˆ’æ‰§è¡Œæ—¶é—´â€æ¨¡å¼
- å„ç§å…¶ä»–ç”¨ä¾‹

è¦ *å…¨å±€* é…ç½®æ•´ä¸ªæµ‹è¯•å¥—ä»¶çš„æµ‹è¯•ç±»æ‰§è¡Œé¡ºåºï¼Œè¯·ä½¿ç”¨[é…ç½®å‚æ•°](https://junit.org/junit5/docs/current/user-guide/#running-tests-config-params) `junit.jupiter.testclass.order.default` æ¥æŒ‡å®šæ‚¨æƒ³è¦ä½¿ç”¨çš„ `ClassOrderer`çš„å®Œå…¨é™å®šç±»åã€‚æä¾›çš„ç±»å¿…é¡»å®ç° `ClassOrderer` æ¥å£ã€‚

ä½ å¯ä»¥å®ç°ä½ è‡ªå·±çš„è‡ªå®šä¹‰ `ClassOrderer` ï¼Œæˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†…ç½® `ClassOrderer` å®ç°ä¹‹ä¸€ã€‚

- `ClassOrderer.ClassName`ï¼šæ ¹æ®æµ‹è¯•ç±»çš„å®Œå…¨é™å®šç±»åæŒ‰å­—æ¯æ•°å­—æ’åº
- `ClassOrderer.DisplayName`ï¼šæ ¹æ®æµ‹è¯•ç±»çš„æ˜¾ç¤ºåç§°æŒ‰å­—æ¯æ•°å­—æ’åºï¼ˆå‚è§[æ˜¾ç¤ºåç§°ç”Ÿæˆä¼˜å…ˆè§„åˆ™](https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator-precedence-rules)ï¼‰
- `ClassOrderer.OrderAnnotation`ï¼šæ ¹æ®é€šè¿‡ `@Order` æ³¨è§£æŒ‡å®šçš„å€¼å¯¹æµ‹è¯•ç±»è¿›è¡Œæ•°å­—æ’åºã€‚
- `ClassOrderer.Random`ï¼šä¼ªéšæœºæ’åºæµ‹è¯•ç±»ï¼Œæ”¯æŒè‡ªå®šä¹‰ç§å­çš„é…ç½®

ä¾‹å¦‚ï¼Œè¦åœ¨æµ‹è¯•ç±»ä¸Šä½¿ç”¨ `@Order` æ³¨è§£ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨é…ç½®å‚æ•°å’Œç›¸åº”çš„å…¨é™å®šç±»åé…ç½® `ClassOrderer.OrderAnnotation` ç±»æ’åºå™¨ã€‚  æ¯”å¦‚ï¼Œåœ¨ `src/test/resources/junit-platform.properties` ä¸­ï¼š

``` java
junit.jupiter.testclass.order.default = \
    org.junit.jupiter.api.ClassOrderer$OrderAnnotation
```

é…ç½®çš„ `ClassOrderer` å°†åº”ç”¨äºæ‰€æœ‰é¡¶çº§æµ‹è¯•ç±»ï¼ˆåŒ…æ‹¬ `static` åµŒå¥—æµ‹è¯•ç±»ï¼‰å’Œ `@Nested` æµ‹è¯•ç±»ã€‚

> é¡¶çº§æµ‹è¯•ç±»å°†ç›¸å¯¹äºå½¼æ­¤è¿›è¡Œæ’åºï¼› è€Œ `@Nested` æµ‹è¯•ç±»å°†ç›¸å¯¹äºå…±äº«ç›¸åŒå°é—­ç±»çš„å…¶ä»– `@Nested` æµ‹è¯•ç±»è¿›è¡Œæ’åºã€‚ 

è¦åœ¨ *æœ¬åœ°* ä¸º `@Nested` æµ‹è¯•ç±»é…ç½®æµ‹è¯•ç±»æ‰§è¡Œé¡ºåºï¼Œè¯·åœ¨è¦æ’åºçš„ `@Nested`  æµ‹è¯•ç±»çš„å°é—­ç±»ä¸Šå£°æ˜ `@TestClassOrder`æ³¨è§£ï¼Œå¹¶æä¾›å¯¹è¦ç›´æ¥ä½¿ç”¨çš„`ClassOrderer`å®ç°çš„ç±»å¼•ç”¨ `@TestClassOrder` æ³¨è§£ã€‚é…ç½®çš„ `ClassOrderer` å°†é€’å½’åœ°åº”ç”¨äº `@Nested` æµ‹è¯•ç±»åŠå…¶ `@Nested` æµ‹è¯•ç±»ã€‚ è¯·æ³¨æ„ï¼Œæœ¬åœ° `@TestClassOrder` å£°æ˜å§‹ç»ˆè¦†ç›–ç»§æ‰¿çš„ `@TestClassOrder` å£°æ˜ï¼Œæˆ–é€šè¿‡ `junit.jupiter.testclass.order.default`  é…ç½®å‚æ•°å…¨å±€é…ç½®çš„ `ClassOrderer`ã€‚ 

The configured `ClassOrderer` will be applied recursively to `@Nested` test classes and their `@Nested` test classes. Note that a local `@TestClassOrder` declaration always overrides an inherited `@TestClassOrder` declaration or a `ClassOrderer` configured globally via the `junit.jupiter.testclass.order.default` configuration parameter.

ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä¿è¯æŒ‰ç…§é€šè¿‡ `@Order` æ³¨è§£æŒ‡å®šçš„é¡ºåºæ‰§è¡Œ `@Nested` æµ‹è¯•ç±»ã€‚

``` java
import org.junit.jupiter.api.ClassOrderer;
import org.junit.jupiter.api.Nested;
import org.junit.jupiter.api.Order;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestClassOrder;

@TestClassOrder(ClassOrderer.OrderAnnotation.class)
class OrderedNestedTestClassesDemo {

    @Nested
    @Order(1)
    class PrimaryTests {

        @Test
        void test1() {
        }
    }

    @Nested
    @Order(2)
    class SecondaryTests {

        @Test
        void test2() {
        }
    }
}
```



### 2.10. æµ‹è¯•å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ



#### 2.10.1. æ›´æ”¹é»˜è®¤çš„æµ‹è¯•å®ä¾‹ç”Ÿå‘½å‘¨æœŸ



### 2.11. åµŒå¥—çš„æµ‹è¯•

### 2.12. æ„é€ å‡½æ•°å’Œæ–¹æ³•çš„ä¾èµ–é¡¹æ³¨å…¥

### 2.13. æµ‹è¯•æ¥å£å’Œé»˜è®¤æ–¹æ³•

### 2.14. é‡å¤æµ‹è¯•

#### 2.14.1. é‡å¤æµ‹è¯•ç¤ºä¾‹

### 2.15. å‚æ•°åŒ–æµ‹è¯•

å‚æ•°åŒ–æµ‹è¯•è®©**ä½¿ç”¨ä¸åŒçš„å‚æ•°å¤šæ¬¡è¿è¡Œä¸€ä¸ªæµ‹è¯•**æˆä¸ºå¯èƒ½ã€‚å£°æ˜å‚æ•°åŒ–æµ‹è¯•ï¼Œä¸å£°æ˜å¸¸è§„ `@Test` æ–¹æ³•ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯ä½¿ç”¨`@ParameterizedTest`æ³¨è§£ï¼Œè€Œä¸æ˜¯ `@Test` æ³¨è§£ã€‚ å¦å¤–ï¼Œå¿…é¡»å£°æ˜è‡³å°‘ä¸€ä¸ª *source*ï¼Œè¯¥ *source* å°†ä¸ºæ¯æ¬¡è°ƒç”¨æä¾›å‚æ•°ï¼Œç„¶ååœ¨æµ‹è¯•æ–¹æ³•ä¸­ *consume* è¿™äº›å‚æ•°ã€‚ 

ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å‚æ•°åŒ–æµ‹è¯•ï¼Œè¯¥æµ‹è¯•ä½¿ç”¨`@ValueSource`æ³¨è§£å°†ä¸€ä¸ª `String` æ•°ç»„æŒ‡å®šä¸ºå‚æ•°æºã€‚

``` java
@ParameterizedTest
@ValueSource(strings = { "racecar", "radar", "able was I ere I saw elba" })
void palindromes(String candidate) {//å€™é€‰é¡¹æ˜¯å›æ–‡
    assertTrue(StringUtils.isPalindrome(candidate));
}
```

æ‰§è¡Œä¸Šè¿°å‚æ•°åŒ–æµ‹è¯•æ–¹æ³•æ—¶ï¼Œå°†åˆ†åˆ«æŠ¥å‘Šæ¯ä¸ªè°ƒç”¨ã€‚ ä¾‹å¦‚ï¼Œ`ConsoleLauncher`å°†æ‰“å°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºã€‚ 

 ``` 
palindromes(String) âœ”
â”œâ”€ [1] candidate=racecar âœ”
â”œâ”€ [2] candidate=radar âœ”
â””â”€ [3] candidate=able was I ere I saw elba âœ”
 ```

#### 2.15.1. å¿…è¦çš„è®¾ç½®

ä¸ºäº†ä½¿ç”¨å‚æ•°åŒ–æµ‹è¯•ï¼Œä½ éœ€è¦æ·»åŠ å¯¹`junit-jupiter-params` æ„ä»¶çš„ä¾èµ–ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ[ä¾èµ–å…ƒæ•°æ®](https://junit.org/junit5/docs/current/user-guide/#dependency-metadata)ã€‚

#### 2.15.2. æ¶ˆè´¹å‚æ•°

å‚æ•°åŒ–æµ‹è¯•æ–¹æ³•é€šå¸¸ä½¿ç”¨å‚æ•°æºç´¢å¼•å’Œæ–¹æ³•å‚æ•°ç´¢å¼•ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³è”ï¼ˆè¯·å‚é˜…[`@CsvSource`](#@CsvSource)ä¸­çš„ç¤ºä¾‹ï¼‰ï¼Œç›´æ¥ä»å·²é…ç½®çš„æºä¸­ä½¿ç”¨å‚æ•°ï¼ˆè¯·å‚é˜… [å‚æ•°çš„æº](#2.15.3. å‚æ•°æº)ï¼‰ã€‚ä½†æ˜¯ï¼Œå‚æ•°åŒ–æµ‹è¯•æ–¹æ³•ä¹Ÿå¯ä»¥é€‰æ‹©å°†æ¥è‡ªæºçš„å‚æ•° *èšåˆ* åˆ°ä¼ é€’ç»™è¯¥æ–¹æ³•çš„å•ä¸ªå¯¹è±¡ä¸­ï¼ˆè¯·å‚é˜…[å‚æ•°èšåˆ](#2.15.5. å‚æ•°èšåˆ)ï¼‰ã€‚`ParameterResolver`ä¹Ÿå¯ä»¥æä¾›å…¶ä»–å‚æ•°ï¼ˆæ¯”å¦‚ï¼Œè·å– `TestInfo`ï¼Œ`TestReporter`ç­‰çš„ä¸€ä¸ªå®ä¾‹ï¼‰ã€‚ å…·ä½“æ¥è¯´ï¼Œå‚æ•°åŒ–æµ‹è¯•æ–¹æ³•å¿…é¡»æ ¹æ®ä»¥ä¸‹è§„åˆ™å£°æ˜å½¢å‚ã€‚

* é¦–å…ˆï¼Œå¿…é¡»å£°æ˜é›¶ä¸ªæˆ–å¤šä¸ªè¢«ç´¢å¼•çš„å‚æ•°ã€‚
* æ¥ä¸‹æ¥ï¼Œå¿…é¡»å£°æ˜é›¶ä¸ªæˆ–å¤šä¸ªèšåˆå™¨ã€‚
* ç”±`ParameterResolver`æä¾›çš„é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°å¿…é¡»æœ€åå£°æ˜ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¢«ç´¢å¼•çš„å‚æ•°æ˜¯ç”±ä¸€ä¸ª`ArgumentsProvider`æä¾›çš„å‚æ•°ä¸­ä¸€ä¸ªç»™å®šç´¢å¼•çš„å‚æ•°ï¼Œè¯¥å‚æ•°è¢«ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å‚æ•°åŒ–æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ä¸­å…·æœ‰ç›¸åŒç´¢å¼•çš„å‚æ•°ã€‚ ä¸€ä¸ª*aggregator*èšåˆå™¨æ˜¯`ArgumentsAccessor`ç±»å‹çš„ä»»ä½•å‚æ•°ï¼Œæˆ–ç”¨`@AggregateWith`æ³¨è§£çš„ä»»ä½•å‚æ•°ã€‚ 

#### 2.15.3. å‚æ•°æº

å¼€ç®±å³ç”¨ï¼ŒJUnit Jupiter**æä¾›äº†å¾ˆå¤šæºæ³¨è§£**ã€‚ ä»¥ä¸‹æ¯ä¸ªå°èŠ‚åˆ†åˆ«æä¾›äº†ç®€è¦æ¦‚è¿°å’Œç¤ºä¾‹ã€‚ è¯·å‚é˜…`org.junit.jupiter.params.provider`åŒ…ä¸­çš„Javaæ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚ 

##### @ValueSource

`@ValueSource`æ˜¯æœ€ç®€å•çš„å¯èƒ½æ¥æºä¹‹ä¸€ã€‚å®ƒä½¿ä½ å¯ä»¥**æŒ‡å®šä¸€ä¸ªå•å­—é¢å€¼æ•°ç»„**ï¼Œå¹¶ä¸”åªèƒ½ç”¨äº**ä¸ºæ¯ä¸ªå‚æ•°åŒ–æµ‹è¯•è°ƒç”¨æä¾›å•ä¸ªå‚æ•°**ã€‚ 

`@ValueSource`æ”¯æŒä»¥ä¸‹ç±»å‹çš„å­—é¢é‡ã€‚

- `short`
- `byte`
- `int`
- `long`
- `float`
- `double`
- `char`
- `boolean`
- `java.lang.String`
- `java.lang.Class`

ä¾‹å¦‚ï¼Œä¸‹é¢çš„`@ParameterizedTest`æ–¹æ³•å°†è¢«è°ƒç”¨ä¸‰æ¬¡ï¼Œåˆ†åˆ«ä½¿ç”¨å€¼1ã€2å’Œ3ã€‚

``` java
@ParameterizedTest
@ValueSource(ints = { 1, 2, 3 })
void testWithValueSource(int argument) {
    assertTrue(argument > 0 && argument < 4);
}
```

##### Null and Empty Sources

ä¸ºäº†æ£€æŸ¥æç«¯æƒ…å†µï¼Œå¹¶éªŒè¯æˆ‘ä»¬çš„è½¯ä»¶åœ¨æä¾›é”™è¯¯è¾“å…¥æ—¶çš„æ­£ç¡®è¡Œä¸ºï¼Œ**å°†`null`å’Œç©ºå€¼æä¾›ç»™å‚æ•°åŒ–æµ‹è¯•**æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä»¥ä¸‹æ³¨è§£ç”¨ä½œæ¥å—å•ä¸ªå‚æ•°çš„å‚æ•°åŒ–æµ‹è¯•çš„`null`å’Œç©ºå€¼çš„æºã€‚

* `@NullSource`:  ä¸ºå¸¦æ³¨è§£çš„`@ParameterizedTest`æ–¹æ³•æä¾›å•ä¸ª`null`å‚æ•°ã€‚ 
  * `@NullSource` ä¸èƒ½ç”¨äºå…·æœ‰åŸå§‹ç±»å‹çš„å‚æ•°ã€‚
* `@EmptySource`:  ä¸ºå¸¦æ³¨è§£çš„`@ParameterizedTest`æ–¹æ³•æä¾›ä¸€ä¸ª*empty*ç©ºå‚æ•°ï¼Œç”¨äºä»¥ä¸‹ç±»å‹çš„å‚æ•°ï¼š `java.lang.String`, `java.util.List`, `java.util.Set`, `java.util.Map`,  åŸå§‹ç±»å‹æ•°ç»„  (æ¯”å¦‚ï¼Œ `int[]`, `char[][]`, ç­‰ç­‰)ï¼Œ å¯¹è±¡æ•°ç»„ (æ¯”å¦‚ï¼Œ`String[]`, `Integer[][]`, ç­‰ç­‰).
  -  ä¸æ”¯æŒå—æ”¯æŒç±»å‹çš„å­ç±»å‹ã€‚ 
*  `@NullAndEmptySource`:  ç»„åˆäº†`@NullSource`å’Œ`@EmptySource`åŠŸèƒ½çš„ä¸€ä¸ªç»„åˆæ³¨è§£ã€‚ 

å¦‚æœä½ éœ€è¦ä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›å¤šç§ä¸åŒç±»å‹çš„ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`@ValueSource`æ¥å®ç°ï¼Œä¾‹å¦‚ `@ValueSource(strings = {" ", "  ", "\t", "\n"})`ã€‚ 

ä½ è¿˜å¯ä»¥ç»„åˆä½¿ç”¨`@NullSource`ã€`@EmptySource`å’Œ`@ValueSource`æ¥æµ‹è¯•æ›´å¤§èŒƒå›´çš„`null`ã€ *empty*ç©ºå’Œ *blank*ç©ºç™½è¾“å…¥ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä¸ºå­—ç¬¦ä¸²å®ç°è¿™ä¸€ç‚¹ã€‚

``` java
@ParameterizedTest
@NullSource
@EmptySource
@ValueSource(strings = { " ", "   ", "\t", "\n" })
void nullEmptyAndBlankStrings(String text) {
    assertTrue(text == null || text.trim().isEmpty());
}
```

ä½¿ç”¨ç»„åˆçš„`@NullAndEmptySource`æ³¨è§£å¯ä»¥ç®€åŒ–ä¸Šè¿°æ“ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 

``` java
@ParameterizedTest
@NullAndEmptySource
@ValueSource(strings = { " ", "   ", "\t", "\n" })
void nullEmptyAndBlankStrings(String text) {
    assertTrue(text == null || text.trim().isEmpty());
}
```

`nullEmptyAndBlankStrings(String)`å‚æ•°åŒ–æµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå˜ä½“éƒ½ä¼šå¯¼è‡´å…­æ¬¡è°ƒç”¨ï¼š1æ¬¡ä¸º`null`, 1æ¬¡ä¸º emptyç©ºå­—ç¬¦ä¸²ï¼Œ4æ¬¡ä¸ºé€šè¿‡`@ValueSource`æ˜¾å¼æä¾›çš„ç©ºå­—ç¬¦ä¸²ã€‚

##### @EnumSource



``` java
@ParameterizedTest
@EnumSource(TimeUnit.class)
void testWithEnumSource(TimeUnit timeUnit) {
    assertNotNull(timeUnit);
}
```

``` java
@ParameterizedTest
@EnumSource(value = TimeUnit.class, names = { "DAYS", "HOURS" })
void testWithEnumSourceInclude(TimeUnit timeUnit) {
    assertTrue(EnumSet.of(TimeUnit.DAYS, TimeUnit.HOURS).contains(timeUnit));
}
```



``` java
@ParameterizedTest
@EnumSource(value = TimeUnit.class, mode = EXCLUDE, names = { "DAYS", "HOURS" })
void testWithEnumSourceExclude(TimeUnit timeUnit) {
    assertFalse(EnumSet.of(TimeUnit.DAYS, TimeUnit.HOURS).contains(timeUnit));
    assertTrue(timeUnit.name().length() > 5);
}
```

``` java
@ParameterizedTest
@EnumSource(value = TimeUnit.class, mode = MATCH_ALL, names = "^(M|N).+SECONDS$")
void testWithEnumSourceRegex(TimeUnit timeUnit) {
    String name = timeUnit.name();
    assertTrue(name.startsWith("M") || name.startsWith("N"));
    assertTrue(name.endsWith("SECONDS"));
}
```



##### @MethodSource

##### @CsvSource

`@CsvSource` å…è®¸ä½ å°†å‚æ•°åˆ—è¡¨è¡¨ç¤ºä¸ºé€—å·åˆ†éš”çš„å€¼(å³å­—ç¬¦ä¸²å­—é¢é‡)ã€‚

``` java
@ParameterizedTest
@CsvSource({
    "apple,         1",
    "banana,        2",
    "'lemon, lime', 0xF1"
})
void testWithCsvSource(String fruit, int rank) {
    assertNotNull(fruit);
    assertNotEquals(0, rank);
}
```



| Example Input                            | Resulting Argument List    |
| ---------------------------------------- | -------------------------- |
| `@CsvSource({ "apple, banana" })`        | `"apple"`, `"banana"`      |
| `@CsvSource({ "apple, 'lemon, lime'" })` | `"apple"`, `"lemon, lime"` |
| `@CsvSource({ "apple, ''" })`            | `"apple"`, `""`            |
| `@CsvSource({ "apple, " })`              | `"apple"`, `null`          |



##### @CsvFileSource

##### @ArgumentsSource

#### 2.15.4. å‚æ•°è½¬æ¢

##### Widening Conversion

##### Implicit Conversion

###### Fallback String-to-Object Conversion

##### Explicit Conversion

#### 2.15.5. å‚æ•°èšåˆ

##### Custom Aggregators

#### 2.15.6. è‡ªå®šä¹‰æ˜¾ç¤ºåç§°

#### 2.15.7.  ç”Ÿå‘½å‘¨æœŸå’Œäº’æ“ä½œæ€§ 

### 2.16. æµ‹è¯•æ¨¡æ¿

### 2.17. åŠ¨æ€æµ‹è¯•

#### 2.17.1. åŠ¨æ€æµ‹è¯•çš„ä¾‹å­

#### 2.17.2. URI Test Sources for Dynamic Tests

### 2.18. Timeouts è¶…æ—¶

#### 2.18.1. ä½¿ç”¨`@Timeout`è½®è¯¢æµ‹è¯•

### 2.19. å¹¶è¡Œæ‰§è¡Œ

#### 2.19.1. é…ç½®

#### 2.19.2. åŒæ­¥

### 2.20. å†…ç½®çš„æ‰©å±•

#### 2.20.1. TempDirectoryæ‰©å±•