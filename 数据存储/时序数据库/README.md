# 时序数据库

> Time Series Database

常见开源解决方案：Facebook 的 [beringei]()，百度云的 [OpenTSDB](https://github.com/OpenTSDB/opentsdb)

## 基本概念

**高效读写**、**高压缩比存储**

**时序数据**是基于时间的一系列的数据。在有时间的坐标中将这些数据点连成线，往过去看可以做成多纬度报表，揭示其趋势性、规律性、异常性；往未来看可以做大数据分析，机器学习，实现预测和预警。

**时序数据库**就是存储时序数据的数据库，并且需要支持时序数据的快速写入、持久化、多纬度的聚合查询等基本功能。

时序数据库记录了所有的历史数据。同时时序数据的查询也总是会带上时间作为过滤条件。



## 应用场景

所有的有时序数据产生，并且需要展现其历史趋势、周期规律、异常性的，进一步对未来做出预测分析的，都是时序数据库适合的场景。

解决由于设备采集点数量巨大、数据采集频率高造成的存储成本高、写入和查询分析效率低的问题。

## 面临的挑战

海量数据

* 读取：每秒钟上千万上亿数据点的写入
* 写入：在秒级对上亿数据的分组聚合运算
* 成本敏感：更低成本的存储海量数据

## 存储方案

### 单机存储

传统数据库存储采用 `BTree`。`BTree` 在查询和顺序插入时有利于减少寻道次数。磁盘寻道时间，10ms左右。磁盘随机读写慢的根本原因是寻道慢。SSD 寻道更快，但没有从根本上解决问题。

业界主流采用LSM tree替换`BTree`，比如，Hbase, Cassandra等nosql。LSM tree包括内存里的数据结构和磁盘上的文件两部分。通过内存写和后续磁盘的顺序写获得更高的写入性能，避免了随机写入。

### 分布式存储

分片，将数据分布到多台机器上。

> 参考：https://blog.csdn.net/qq_33326449/article/details/79568014